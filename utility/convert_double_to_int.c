#include <stdio.h>
#include <stdint.h>
#include <string.h>

uint16_t concatenate(uint16_t x, uint16_t y)
{
    unsigned pow = 10;
    while (y >= pow)
        pow *= 10;
    return x * pow + y;
}

int main(void)
{
    float data[] = {9.739696383476257324e-01, 9.132320880889892578e-01, 8.655097484588623047e-01, 8.232104182243347168e-01, 7.462038993835449219e-01, 6.420824527740478516e-01, 5.477223396301269531e-01, 4.262472987174987793e-01, 3.253796100616455078e-01, 2.798264622688293457e-01, 2.288503199815750122e-01, 1.366594433784484863e-01, 4.772234335541725159e-02, 1.084598712623119354e-02, 1.008676812052726746e-01, 1.887201666831970215e-01, 2.277657240629196167e-01, 2.407809048891067505e-01, 2.570498883724212646e-01, 2.635574936866760254e-01, 2.939262390136718750e-01, 3.188720047473907471e-01, 3.492407798767089844e-01, 4.023861289024353027e-01, 4.392624795436859131e-01, 4.501084685325622559e-01, 4.620390534400939941e-01, 4.750542342662811279e-01, 4.891540110111236572e-01, 4.869848191738128662e-01, 5.075922012329101562e-01, 5.108459591865539551e-01, 5.303687453269958496e-01, 5.433839559555053711e-01, 5.694143176078796387e-01, 5.824295282363891602e-01, 6.084598898887634277e-01, 6.193058490753173828e-01, 6.420824527740478516e-01, 6.507592201232910156e-01, 6.583514213562011719e-01, 6.572667956352233887e-01, 6.550976037979125977e-01, 6.268980503082275391e-01, 6.214750409126281738e-01, 6.019522547721862793e-01, 5.824295282363891602e-01, 5.477223396301269531e-01, 5.227765440940856934e-01, 4.837310314178466797e-01, 4.707158207893371582e-01, 4.338394701480865479e-01, 4.175705015659332275e-01, 4.034707248210906982e-01, 3.926247358322143555e-01, 3.828633427619934082e-01, 3.828633427619934082e-01, 3.796095550060272217e-01, 3.839479386806488037e-01, 3.752711415290832520e-01, 3.687635660171508789e-01, 3.665943741798400879e-01, 3.676789700984954834e-01, 3.644251525402069092e-01, 3.698481619358062744e-01, 3.709327578544616699e-01, 3.698481619358062744e-01, 3.644251525402069092e-01, 3.752711415290832520e-01, 3.828633427619934082e-01, 3.872017264366149902e-01, 3.698481619358062744e-01, 3.861171305179595947e-01, 3.763557374477386475e-01, 3.796095550060272217e-01, 3.817787468433380127e-01, 3.839479386806488037e-01, 3.752711415290832520e-01, 3.817787468433380127e-01, 3.796095550060272217e-01, 3.731019496917724609e-01, 3.774403333663940430e-01, 3.861171305179595947e-01, 3.785249590873718262e-01, 3.882863223552703857e-01, 3.774403333663940430e-01, 3.828633427619934082e-01, 3.991323113441467285e-01, 3.969631195068359375e-01, 3.958785235881805420e-01, 4.305856823921203613e-01, 4.360086619853973389e-01, 4.479392766952514648e-01, 4.544468522071838379e-01, 4.598698616027832031e-01, 4.522776603698730469e-01, 4.642082452774047852e-01, 4.663774371147155762e-01, 4.587852358818054199e-01, 4.869848191738128662e-01, 7.809110879898071289e-01, 1.000000000000000000e+00, 9.598698616027832031e-01, 9.045553207397460938e-01, 8.427332043647766113e-01, 7.787418365478515625e-01, 7.071583271026611328e-01, 6.312364339828491211e-01, 5.260303616523742676e-01, 4.186550974845886230e-01, 3.145336210727691650e-01, 2.331887185573577881e-01, 2.049891501665115356e-01, 1.420824229717254639e-01, 6.399132311344146729e-02, 0.000000000000000000e+00, 9.978307783603668213e-02, 1.876355707645416260e-01, 2.386117130517959595e-01, 2.505423128604888916e-01, 2.678958773612976074e-01, 2.516269087791442871e-01, 0.000000000000000000e+00, 0.000000000000000000e+00, 0.000000000000000000e+00, 0.000000000000000000e+00, 0.000000000000000000e+00, 0.000000000000000000e+00, 0.000000000000000000e+00, 0.000000000000000000e+00, 0.000000000000000000e+00, 0.000000000000000000e+00, 0.000000000000000000e+00, 0.000000000000000000e+00, 0.000000000000000000e+00, 0.000000000000000000e+00, 0.000000000000000000e+00, 0.000000000000000000e+00, 0.000000000000000000e+00, 0.000000000000000000e+00, 0.000000000000000000e+00, 0.000000000000000000e+00, 0.000000000000000000e+00, 0.000000000000000000e+00, 0.000000000000000000e+00, 0.000000000000000000e+00, 0.000000000000000000e+00, 0.000000000000000000e+00, 0.000000000000000000e+00, 0.000000000000000000e+00, 0.000000000000000000e+00, 0.000000000000000000e+00, 0.000000000000000000e+00, 0.000000000000000000e+00, 0.000000000000000000e+00, 0.000000000000000000e+00, 0.000000000000000000e+00, 0.000000000000000000e+00, 0.000000000000000000e+00, 0.000000000000000000e+00, 0.000000000000000000e+00, 0.000000000000000000e+00, 0.000000000000000000e+00, 0.000000000000000000e+00, 0.000000000000000000e+00, 0.000000000000000000e+00, 0.000000000000000000e+00, 0.000000000000000000e+00, 0.000000000000000000e+00, 0.000000000000000000e+00, 0.000000000000000000e+00, 0.000000000000000000e+00, 0.000000000000000000e+00, 0.000000000000000000e+00, 0.000000000000000000e+00, 0.000000000000000000e+00, 0.000000000000000000e+00, 0.000000000000000000e+00, 0.000000000000000000e+00, 0.000000000000000000e+00, 0.000000000000000000e+00, 0.000000000000000000e+00, 0.000000000000000000e+00, 0.000000000000000000e+00, 0.000000000000000000e+00, 0.000000000000000000e+00, 0.000000000000000000e+00, 4.000000000000000000e+00};

    // float data[] = {9.739696383476257324e-01};

    // numner of data values in the array
    uint8_t data_nBytes = sizeof(data) / sizeof(float);
    printf("data_nBytes: %d\n", data_nBytes);

    // for every value in the data array, covert to bit pattern and store in another uint16_t array
    uint16_t output[sizeof(data)] = {0};

    printf("Size of data: %ld bytes \n", sizeof(data));

    for (int i = 0; i < data_nBytes; i += 4)
    {
        uint16_t bitpattern[sizeof(float)];
        memcpy(bitpattern, &data[i], sizeof(float));

        output[i] = bitpattern[0];
        output[i + 1] = bitpattern[1];
        output[i + 2] = bitpattern[2];
        output[i + 3] = bitpattern[3];
    }

    // print the bit pattern
    for (int i = 0; i < sizeof(output) / sizeof(output[0]); i++)
        printf("%d \t", output[i]);
    printf("\n");
    printf("=====================================\n");

    // print the original data from the output array
    for (int i = 0; i < sizeof(output) / sizeof(output[0]); i += 4)
    {
        float destination = 0;
        uint16_t bitpattern[sizeof(float)];

        bitpattern[0] = output[i];
        bitpattern[1] = output[i + 1];
        bitpattern[2] = output[i + 2];
        bitpattern[3] = output[i + 3];

        memcpy(&destination, &output[i], sizeof(float));
        printf("%f \t", destination);
    }
    printf("\n");

    return 0;
}
